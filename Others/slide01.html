<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배너(슬라이드)</title>
    <style>
        *{
            box-sizing: border-box;
            margin: 0;
            border: 0;
            font-family: sans-serif;
        }
        body{
            background-color: #f5f5f5;
        }
        .slider-wrap{
            /* 부모 */
            position: relative;
            width: 600px;
            height: 400px;
            margin:  100px auto;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        .slider-wrap .slider img{
            width: 100%;
            height: 400px;
        }
        .slider-wrap .btns{
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }
        .slider-wrap .btns span{
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #fff;
            cursor: pointer;
        }
        .slider-wrap .btns span.active{
            background-color: #007bff;
            /* transform : 요소의 회전, 확대, 이동, 기울기등의 효과를 변형하여 사용 */
            /* scale(1.3) => 크기를 1.3배 확대 */
            /* rotate(45deg) = > 45도 회전 */
            /* rotate(180deg) = > 상하반전 */
            transform: scale(1.3);
        }
        .slider-wrap .control{
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            padding: 5px 10px;
        }
    </style>
</head>
<body>
    <div class="slider-wrap">
        <div class="slider">
            <img id="photo" src="img/pic_1.jpg" alt="슬라이드 이미지" />
        </div>
        <div class="btns">
            <span class="active"></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="control" id="togglebtn">&#x23F8; 정지</div>
    </div>
    <!-- 스크립트 시작 -->
    <script>
        /* DOM 접근하여 변수 지정 */
        /* 이미지 변경 photo.src이에 접근하기 위해 */
        let photo = document.getElementById('photo');
        /* btns[0], btns[1]... 배열형태로 접근 */
        let btns = document.querySelectorAll('.btns span')
        /* 재생/정지 토글 버튼으로 사용하기위해 */
        let togglebtn = document.getElementById('togglebtn')
        /* 현재 보여주는 슬라이드의 index번호(0부터 시작) */
        let current = 0;
        /* btns.length를 total 변수로 지정 , 현재 total = 5 */
        let total = btns.length;
        /* 지금 현재 슬라이드가 재생중인지 아니면 정지 중인지의 상태를 저장하는 변수가 필요 */
        /* true를 지정해서 현재 재생 중으로 표현 */
        let isPlay = true;
        //setInterval() 함수를 이용하여 반복적으로 이미지가 변경
        //되도록 지정할 예정
        let timer ;

        /* 자동으로 이미지 변경하는 함수 */
        /* 함수이름 slideShow(index) */

        function slideShow(current){
            /* 이미지를 변경 코드 */
            /* index는 0부터 시작 이미지 파일명1부터 여서 +1 */
            photo.src = `img/pic_${current+1}.jpg`

            /* 모든 btns 버튼의 active를 삭제 */

            for(let i=0; i<total ; i++){
                //i번재 버튼에 active 클래스 삭제
                btns[i].classList.remove('active')
            }
            /* index해당하는 btns에 active 추가 */
            btns[current].classList.add('active')
        }
        /* 3초마다 이미지가 자동 변경되는 슬라이드 시작함수 */
        function startSlide(){
            timer = setInterval(()=>{
                /* 5번재가 되면 다시 current가 0이되게 */
                /* if(current === total-1){
                    current=0;
                    
                }else{
                    current++;
                } */
               current = (current + 1) % total;
                slideShow(current)
            },3000)
        }

        /* stop 슬라이드 함수 */
        function stopSlide(){
            clearInterval(timer);
        }
       
        /* 함수 호출 */
        slideShow(current);
        startSlide();

        /* 재생 정지버튼 상태 함수 */
        togglebtn.addEventListener('click',()=>{
            /* 현재 상태가 재생중이면 정지동작 수행 */
            if(isPlay===true){
                stopSlide()
                togglebtn.textContent=` ▶ 재생`
                /* isPlay=false; */

            }else{
                startSlide()
                togglebtn.textContent=` \u23F8 정지`
                /* isPlay=true; */
            }
            /* isPlay=false; */
            isPlay=!isPlay;
        })
    </script>
</body>
</html>